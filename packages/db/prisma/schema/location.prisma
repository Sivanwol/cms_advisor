model PolygonGroup {
    id       Int    @id @default(autoincrement())
    name     String @unique
    polygons Polygon[]

    @@map("polygon_group")
    Stations Stations[]
    DailyPickups DailyPickups[]
    DailyPickupSelectedStation DailyPickupSelectedStation[]
}
model Polygon {
    id        Int    @id @default(autoincrement())
    name      String @unique
    latitude  Float
    longitude Float
    address   String
    polygonGroupId Int
    PolygonGroup PolygonGroup @relation(fields: [polygonGroupId], references: [id])

    @@map("polygon")
    @@index([polygonGroupId])
}

model Stations {
    id        Int    @id @default(autoincrement())
    name      String @unique
    latitude  Float
    longitude Float
    address   String
    polygonGroupId Int
    PolygonGroup PolygonGroup @relation(fields: [polygonGroupId], references: [id])

    @@map("stations")
    DailyPickupSelectedStation DailyPickupSelectedStation[]
    DailyPickupSelectedStationEmployees DailyPickupSelectedStationEmployees[]
    @@index([polygonGroupId])
}

model DailyPickups {
    id        Int    @id @default(autoincrement())
    startDate      DateTime
    polygonGroupId Int
    PolygonGroup PolygonGroup @relation(fields: [polygonGroupId], references: [id])
    driverId Int
    Driver Driver @relation(fields: [driverId], references: [id])
    stations DailyPickupSelectedStation[]
    @@map("daily_pickups")
    @@index([polygonGroupId])
    @@index([driverId])
    
}
model DailyPickupSelectedStation { 
    id          Int    @id @default(autoincrement())
    dailyPickupId Int
    DailyPickups DailyPickups @relation(fields: [dailyPickupId], references: [id])
    polygonGroupId Int
    PolygonGroup PolygonGroup @relation(fields: [polygonGroupId], references: [id])
    stationId   Int
    Stations Stations @relation(fields: [stationId], references: [id])
    order       Int
    employees   DailyPickupSelectedStationEmployees[]
    @@map("daily_pickup_selected_station")
    @@index([polygonGroupId])
    @@index([stationId])
    @@index([dailyPickupId])
}

model DailyPickupSelectedStationEmployees {
    id          Int    @id @default(autoincrement())
    selectedStationId Int
    DailyPickupSelectedStation DailyPickupSelectedStation @relation(fields: [selectedStationId], references: [id])
    stationId   Int
    Stations Stations @relation(fields: [stationId], references: [id])
    employeeId  Int
    Employee    Employee @relation(fields: [employeeId], references: [id])

    @@map("daily_pickup_selected_station_employees")
    @@index([stationId])
    @@index([employeeId])
    @@index([selectedStationId])
}
